@model IEnumerable<Post>
@using CW.Models
@{
    ViewBag.Title = "Posts list";
    int i = 0;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section MainContent{
    <div class="main-content">
        <h2 style="color: #ffb500">Posts list</h2>
        <h3 style="color: white !important;">All unapproved posts: @(Model.Count<Post>())</h3>

        @foreach (var item in Model)
        {
            

            if (item.Status == (int)PostStatus.Sent)
            {
                <h3>Post sent: @Html.DisplayFor(modelItem => item.Lifecycle.Sent)</h3>
            }
            <div>
                
                <h3>@Html.DisplayFor(modelItem => item.User.Name)</h3>
                <h3>@Html.DisplayFor(modelItem => item.Name)</h3>
            </div>
            if (item.File != null)
            {
                <a href="/Uploads/@item.File"><img class="post-image" src="/Uploads/@item.File" /></a>
            }
            else
            {
                <img src="../../Content/pictures/filen.png" title="no image file" class="tdImage" />
            }

            using (Html.BeginForm())
            {

                @Html.Hidden("postId", item.Id)
                if (item.Status == (int)PostStatus.Sent)
                {
                    @Html.DropDownList("status", new[]
                    {
                        new SelectListItem() {Text = "Sent", Value = "1" },
                        new SelectListItem() { Text = "Approved", Value = "2" }})
                }

                <input type="submit" value="Change status" />
            }
        }
    </div>
}